/*
**  ASTq -- Abstract Syntax Tree (AST) Query Engine
**  Copyright (c) 2014-2015 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.ASTY=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ASTY=e()}}(function(){return function e(t,n,r){function i(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return i(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(){function e(){}return n(e,null,{init:{value:function(e){if("undefined"==typeof e)throw new Error("init: invalid argument");return this.ASTy=!0,this.T=e,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,this},writable:!0,enumerable:!0,configurable:!0},merge:{value:function(e,t,n){if("object"!=typeof e)throw new Error("merge: invalid AST node argument");"undefined"==typeof t&&(t=!1),"undefined"==typeof n&&(n={});var r=this;if(t){var i=e.pos();r.pos(i.L,i.C,i.O)}return e.attrs().forEach(function(t){var i="undefined"!=typeof n[t]?n[t]:t;null!==i&&r.set(i,e.get(t))}),e.childs().forEach(function(e){r.add(e)}),this},writable:!0,enumerable:!0,configurable:!0},type:{value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")},writable:!0,enumerable:!0,configurable:!0},pos:{value:function(e,t,n){if(0===arguments.length)return this.L;if(arguments.length<=3)return this.L.L=e||0,this.L.C=t||0,this.L.O=n||0,this;throw new Error("pos: invalid number of arguments")},writable:!0,enumerable:!0,configurable:!0},set:{value:function(){if(1===arguments.length&&"object"==typeof arguments[0]){var e=this,t=arguments;Object.keys(t[0]).forEach(function(n){e.A[n]=t[0][n]})}else{if(2!==arguments.length)throw new Error("set: invalid arguments");this.A[arguments[0]]=arguments[1]}return this},writable:!0,enumerable:!0,configurable:!0},get:{value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid argument");return this.A[e]},writable:!0,enumerable:!0,configurable:!0},attrs:{value:function(){return Object.keys(this.A)},writable:!0,enumerable:!0,configurable:!0},add:{value:function(){if(0===arguments.length)throw new Error("add: missing argument(s)");var e=function(e,t){if(!("object"==typeof t&&"string"==typeof t.T&&"object"==typeof t.L&&"object"==typeof t.A&&"object"==typeof t.P&&"object"==typeof t.C&&t.C instanceof Array))throw new Error("add: invalid AST node: "+JSON.stringify(t));e.C.push(t),t.P=e};if(null!==arguments){var t=this;Array.prototype.slice.call(arguments,0).forEach(function(n){"object"==typeof n&&n instanceof Array?n.forEach(function(n){e(t,n)}):null!==n&&e(t,n)})}return this},writable:!0,enumerable:!0,configurable:!0},del:{value:function(){if(0===arguments.length)throw new Error("del: invalid argument");var e=this;return Array.prototype.slice.call(arguments,0).forEach(function(t){for(var n=!1,r=0;r<e.C.length;r++)if(e.C[r]===t){e.C.splice(r,1),t.P=null,n=!0;break}if(!n)throw new Error("del: child not found")}),this},writable:!0,enumerable:!0,configurable:!0},childs:{value:function(){return this.C},writable:!0,enumerable:!0,configurable:!0},parent:{value:function(){return this.P},writable:!0,enumerable:!0,configurable:!0},walk:{value:function(e,t){"undefined"==typeof t&&(t="downward");var n=function(r,i,o){("downward"===t||"both"===t)&&e.call(null,r,i,o,"downward"),r.C.forEach(function(e){n(e,i+1,r)}),("upward"===t||"both"===t)&&e.call(null,r,i,o,"upward")};return n(this,0,null),this},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=r},{}],2:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(){function e(){}return n(e,null,{dump:{value:function(){var e="";return this.walk(function(t,n){for(var r=0;n>r;r++)e+="    ";e+=t.T+" ";var i=Object.keys(t.A);if(i.length>0){e+="(";var o=!0;i.forEach(function(n){o?o=!1:e+=", ",e+=n+": ";var r=t.A[n];switch(typeof r){case"string":e+='"'+r.replace(/\n/,"\\n").replace(/"/,'\\"')+'"';break;case"object":e+=r instanceof RegExp?"/"+r.toString().replace(/^\//,"").replace(/\/$/,"").replace(/\//g,"\\/")+"/":JSON.stringify(r);break;default:e+=JSON.stringify(r)}}),e+=") "}e+="["+t.L.L+"/"+t.L.C+"]\n"},"downward"),e},writable:!0,enumerable:!0,configurable:!0}}),e}();t.exports=r},{}],3:[function(e,t){"use strict";t.exports=function(){for(var e=function(){},t=0;t<arguments.length;t++){var n=arguments[t];"function"==typeof n&&(n=n.prototype);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e.prototype[r]=n[r])}return e}},{}],4:[function(e,t){"use strict";var n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},r=e("./asty-base.js"),i=e("./asty-dump.js"),o=e("./asty-mixins.js"),u=function(e){function t(){if(this instanceof t)return this.init.apply(this,arguments);var e=new t("");return e.init.apply(e,arguments)}return n(t,e),t}(o(r,i));u.extend=function(e){for(var t in e)u.prototype[t]=e[t]},t.exports=u},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-mixins.js":3}]},{},[1,2,3,4])(4)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(require,module,exports){
(function (global){
!function(e,n,r){"function"==typeof define&&"undefined"!=typeof define.amd?define(n,function(){return r(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r(e):e[n]=r(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,"PEGUtil",function(){var e={};e.makeAST=function(e,n,r,t){return function(){return t.util.__makeAST.call(null,e(),n(),r(),arguments)}},e.makeUnroll=function(e,n,r,t){return function(o,u,l){if("object"!=typeof u||!(u instanceof Array))throw new t("unroll: invalid list argument for unrolling",typeof u,"Array",r(),e(),n());if("undefined"!=typeof l){"number"==typeof l&&(l=[l]);var a=[];null!==o&&a.push(o);for(var i=0;i<u.length;i++)for(var f=0;f<l.length;f++)a.push(u[i][l[f]]);return a}return null!==o&&u.unshift(o),u}};var n=function(e,n){var r=e.length,t=n-20;0>t&&(t=0);var o=n+20;o>r&&(o=r);var u=function(e){return e.charCodeAt(0).toString(16).toUpperCase()},l=function(e,n,r){return e.substr(n,r).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+u(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+u(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+u(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+u(e)})};return{prolog:l(e,t,n-t),token:l(e,n,1),epilog:l(e,n+1,o-(n+1))}};return e.parse=function(r,t,o){if("object"!=typeof r)throw new Error("invalid parser object (not an object)");if("function"!=typeof r.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof t)throw new Error("invalid input text (not a string)");if("undefined"!=typeof o&&"object"!=typeof o)throw new Error("invalid options (not an object)");"undefined"==typeof o&&(o={});var u={ast:null,error:null};try{var l;l="function"==typeof o.makeAST?o.makeAST:function(e,n,r,t){return{line:e,column:n,offset:r,args:t}};var a={util:{makeUnroll:e.makeUnroll,makeAST:e.makeAST,__makeAST:l}};"string"==typeof o.startRule&&(a.startRule=o.startRule),u.ast=r.parse(t,a),u.error=null}catch(i){u.ast=null;var f=function(e,n){return"undefined"!=typeof e?e:n};u.error={line:f(i.line,0),column:f(i.column,0),message:i.message,found:f(i.found,""),expected:f(i.expected,""),location:n(t,f(i.offset,0))}}return u},e.errorMessage=function(e,n){for(var r=e.location,t="line "+e.line+" (column "+e.column+"): ",o="",u=0;u<t.length+r.prolog.length;u++)o+="-";var l=t+r.prolog+r.token+r.epilog+"\n"+o+"^\n"+e.message+(n?"":"\n");return l},e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(require,module,exports){
"use strict";var ASTQAdapterASTY={taste:function(t){return"object"==typeof t&&"boolean"==typeof t.ASTy},getParentNode:function(t){return t.parent()},getChildNodes:function(t){return t.childs()},getNodeType:function(t){return t.type()},getNodeAttrNames:function(t){return t.attrs()},getNodeAttrValue:function(t,e){return t.get(e)}};module.exports=ASTQAdapterASTY;
},{}],4:[function(require,module,exports){
"use strict";var ASTQAdapterMozAST={taste:function(t){return"object"==typeof t&&"string"==typeof t.type&&"object"==typeof t.loc},getParentNode:function(){throw new Error("Mozilla SpiderMonkey AST does not support parent node traversal")},getChildNodes:function(t){var e=this,o=[];for(var r in t)t.hasOwnProperty(r)&&this.taste(t[r])?o.push(t):t.hasOwnProperty(r)&&"object"==typeof t[r]&&t[r]instanceof Array&&t[r].forEach(function(t){e.taste(t)&&o.push(t)});return o},getNodeType:function(t){return t.type},getNodeAttrNames:function(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&"object"!=typeof t[o]&&"type"!==o&&"loc"!==o&&e.push(o);return e},getNodeAttrValue:function(t,e){return t.hasOwnProperty(e)&&"object"!=typeof t[e]&&"type"!==e&&"loc"!==e?t[e]:void 0}};module.exports=ASTQAdapterMozAST;
},{}],5:[function(require,module,exports){
"use strict";var ASTQAdapterXMLDOM={taste:function(e){return"object"==typeof Node&&e instanceof Node&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},getParentNode:function(e){return e.parentNode},getChildNodes:function(e){return e.childNodes},getNodeType:function(e){return e.nodeName},getNodeAttrNames:function(e){return Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName})},getNodeAttrValue:function(e,t){return e.getAttribute(t)}};module.exports=ASTQAdapterXMLDOM;
},{}],6:[function(require,module,exports){
"use strict";var _prototypeProperties=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},ASTQAdapter=function(){function e(){return this._adapters=[],this}return _prototypeProperties(e,null,{register:{value:function(e){this._adapters.push(e)},writable:!0,enumerable:!0,configurable:!0},select:{value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].taste(e))return this._adapters[t];return void 0},writable:!0,enumerable:!0,configurable:!0}}),e}();module.exports=ASTQAdapter;
},{}],7:[function(require,module,exports){
"use strict";var _prototypeProperties=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},ASTQCache=function(){function e(){return this._index={},this._oldHead={newer:null},this._newHead={older:null},this._oldHead.newer=this._newHead,this._newHead.older=this._oldHead,this._cur=0,this._max=1/0,this._dispose=function(){},this}return _prototypeProperties(e,null,{limit:{value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t},writable:!0,enumerable:!0,configurable:!0},dispose:{value:function(e){return this._dispose=e,this},writable:!0,enumerable:!0,configurable:!0},length:{value:function(){return this._cur},writable:!0,enumerable:!0,configurable:!0},keys:{value:function(){return this.each(function(e,t){this.push(t)},[])},writable:!0,enumerable:!0,configurable:!0},values:{value:function(){return this.each(function(e){this.push(e)},[])},writable:!0,enumerable:!0,configurable:!0},each:{value:function(e,t){arguments<2&&(t=this);for(var r=0,i=this._newHead.older;i!==this._oldHead;)e.call(t,i.val,i.key,r++),i=i.older;return t},writable:!0,enumerable:!0,configurable:!0},has:{value:function(e){var t=this._index[e];return void 0!==t},writable:!0,enumerable:!0,configurable:!0},peek:{value:function(e){var t=this._index[e];return void 0===t?void 0:t.expires<Date.now()?void this.del(t.key):t.val},writable:!0,enumerable:!0,configurable:!0},touch:{value:function(e){var t=this._index[e];return void 0!==t&&this._promote(t),this},writable:!0,enumerable:!0,configurable:!0},get:{value:function(e){var t=this.peek(e);return this.touch(e),t},writable:!0,enumerable:!0,configurable:!0},set:{value:function(e,t,r){arguments.length<3&&(r=1/0),r+=Date.now();var i=this._index[e];if(void 0===i)i={older:null,newer:null,key:e,val:t,expires:r},this._index[e]=i,this._attach(i),this._cur++,this._purge();else{var n=i.val;i.val=t,this._promote(i),this._dispose(void 0,i.key,n,"set")}return this},writable:!0,enumerable:!0,configurable:!0},del:{value:function(e){var t=this._index[e];if(void 0===t)throw new Error("ASTQ::Cache#del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose(void 0,e,t.val,"del"),this},writable:!0,enumerable:!0,configurable:!0},clear:{value:function(){for(;this._cur>0;)this.del(this._oldHead.newer.key);return this},writable:!0,enumerable:!0,configurable:!0},_purge:{value:function(){for(;this._cur>this._max;)this.del(this._oldHead.newer.key)},writable:!0,enumerable:!0,configurable:!0},_promote:{value:function(e){this._detach(e),this._attach(e)},writable:!0,enumerable:!0,configurable:!0},_detach:{value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null},writable:!0,enumerable:!0,configurable:!0},_attach:{value:function(e){e.older=this._newHead.older,e.newer=this._newHead,e.newer.older=e,e.older.newer=e},writable:!0,enumerable:!0,configurable:!0}}),e}();module.exports=ASTQCache;
},{}],8:[function(require,module,exports){
"use strict";var stdfuncs={type:function(t,n){return t.getNodeType(n)},depth:function(t,n){for(var r=1,e=n;null!==(e=t.getParentNode(e));)r++;return r},pos:function(t,n){var r=t.getParentNode(n);if(null===r)return 1;for(var e=t.getChildNodes(r),u=0;u<e.length;u++)if(e[u]===n)return u+1;throw new Error("cannot find myself")},nth:function(t,n,r){r=parseInt(r,10);var e=t.getParentNode(n);if(null!==e){var u=t.getChildNodes(e);0>r&&(r=u-(r+1));for(var o=0;o<u.length;o++)if(u[o]===n)return o+1===r;return!1}return 1===r?!0:!1},first:function(t,n){return stdfuncs.nth(t,n,1)},last:function(t,n){return stdfuncs.nth(t,n,-1)},count:function(t,n,r){return"object"==typeof r&&r instanceof Array?r.length:"object"==typeof r?Object.keys(r).length:"string"==typeof r?r.length:String(r).length},substr:function(t,n,r,e,u){return String(r).substr(e,u)},lc:function(t,n,r){return String(r).toLowerCase()},uc:function(t,n,r){return String(r).toUpperCase()}};module.exports=stdfuncs;
},{}],9:[function(require,module,exports){
"use strict";var _prototypeProperties=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},stdfuncs=require("./astq-funcs-std.js"),ASTQFuncs=function(){function e(){this._funcs={};for(var e in stdfuncs)this.register(e,stdfuncs[e]);return this}return _prototypeProperties(e,null,{register:{value:function(e,t){this._funcs[e]=t},writable:!0,enumerable:!0,configurable:!0},run:{value:function(e,t){var r=this._funcs[e];if("function"!=typeof r)throw new Error('invalid function "'+e+'"');return r.apply(null,t)},writable:!0,enumerable:!0,configurable:!0}}),e}();module.exports=ASTQFuncs;
},{"./astq-funcs-std.js":8}],10:[function(require,module,exports){
"use strict";var _prototypeProperties=function(e,r,t){r&&Object.defineProperties(e,r),t&&Object.defineProperties(e.prototype,t)},_inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(e.__proto__=r)},util=require("./astq-util.js"),ASTQQueryTrace=require("./astq-query-trace.js"),ASTQQueryExec=function(e){function r(e,r,t,i){this.adapter=e,this.params=r,this.funcs=t,this.trace=i}return _inherits(r,e),_prototypeProperties(r,null,{execQuery:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=[];return e.childs().forEach(function(e){i=i.concat(t.execPath(e,r))}),this.traceEnd(e,r,i),i},writable:!0,enumerable:!0,configurable:!0},execPath:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=[r];return e.childs().forEach(function(e){var r=[];i.forEach(function(i){r=r.concat(t.execStep(e,i))}),i=r}),this.traceEnd(e,r,i),i},writable:!0,enumerable:!0,configurable:!0},execStep:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=e.childs(),a=null,c=null,n=null,u=0;if(u<i.length&&"Axis"===i[u].type()&&(a=i[u++]),u<i.length&&"Match"===i[u].type()&&(c=i[u++]),u<i.length&&"Filter"===i[u].type()&&(n=i[u++]),null===c)throw new Error("no matching part in query step");var l=[],s=c.get("id"),o=function(e){var r=t.adapter.getNodeType(e);if("*"===s||s===r){var i=!0;null!==n&&(t.execFilter(n,e)||(i=!1)),i&&l.push(e)}};if(null!==a){var h=a.get("op");if("/"===h)this.adapter.getChildNodes(r).forEach(function(e){return o(e)});else if("//"===h)!function(){var e=function(r){o(r),t.adapter.getChildNodes(r).forEach(function(r){return e(r)})};t.adapter.getChildNodes(r).forEach(function(r){return e(r)})}();else if("<~"===h){var p=this.adapter.getParentNode(r);if(null!==p){for(var x=this.adapter.getChildNodes(p),b=null,d=0;d<x.length&&x[d]!==r;d++)b=x[d];o(b)}}else if("<~~"===h){var p=this.adapter.getParentNode(r);if(null!==p)for(var x=this.adapter.getChildNodes(p),f=0;f<x.length&&x[f]!==r;f++)o(x[f])}else if("~>"===h){var p=this.adapter.getParentNode(r);if(null!==p){var x=this.adapter.getChildNodes(p),g=void 0;for(g=0;g<x.length&&x[g]!==r;g++);g<x.length&&(g++,o(x[g]))}}else if("~~>"===h){var p=this.adapter.getParentNode(r);if(null!==p){var x=this.adapter.getChildNodes(p),E=void 0;for(E=0;E<x.length&&x[E]!==r;E++);if(E<x.length)for(E++;E<x.length;)o(x[E++])}}else if("~^"===h){var p=this.adapter.getParentNode(r);null!==p&&o(p)}else if("~~^"===h)for(var v=r;;){var p=this.adapter.getParentNode(v);if(null===p)break;o(p),v=p}}else o(r);return this.traceEnd(e,r,l),l},writable:!0,enumerable:!0,configurable:!0},execFilter:{value:function(e,r){this.traceBegin(e,r);var t=e.childs()[0],i=this.execExpr(t,r);return i=util.truthy(i),this.traceEnd(e,r,i),i},writable:!0,enumerable:!0,configurable:!0},execExpr:{value:function(e,r){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,r);case"ConditionalTernary":return this.execExprConditionalTernary(e,r);case"Logical":return this.execExprLogical(e,r);case"Bitwise":return this.execExprBitwise(e,r);case"Relational":return this.execExprRelational(e,r);case"Arithmetical":return this.execExprArithmetical(e,r);case"Unary":return this.execExprUnary(e,r);case"FuncCall":return this.execExprFuncCall(e,r);case"Attribute":return this.execExprAttribute(e,r);case"Param":return this.execExprParam(e,r);case"LiteralString":return this.execExprLiteralString(e,r);case"LiteralRegExp":return this.execExprLiteralRegExp(e,r);case"LiteralNumber":return this.execExprLiteralNumber(e,r);case"LiteralValue":return this.execExprLiteralValue(e,r);case"Path":return this.execExprPath(e,r)}},writable:!0,enumerable:!0,configurable:!0},execExprConditionalBinary:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r);return util.truthy(t)||(t=this.execExpr(e.childs()[1],r)),this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0},execExprConditionalTernary:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r);return t=util.truthy(t)?this.execExpr(e.childs()[1],r):this.execExpr(e.childs()[2],r),this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0},execExprLogical:{value:function(e,r){this.traceBegin(e,r);var t=!1;switch(e.get("op")){case"&&":t=util.truthy(this.execExpr(e.childs()[0],r)),t&&(t=t&&util.truthy(this.execExpr(e.childs()[1],r)));break;case"||":t=util.truthy(this.execExpr(e.childs()[0],r)),t||(t=t||util.truthy(this.execExpr(e.childs()[1],r)))}return this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0},execExprBitwise:{value:function(e,r){this.traceBegin(e,r);var t=util.coerce(this.execExpr(e.childs()[0],r),"number"),i=util.coerce(this.execExpr(e.childs()[1],r),"number"),a=void 0;switch(e.get("op")){case"&":a=t&i;break;case"|":a=t|i;break;case"<<":a=t<<i;break;case">>":a=t>>i}return this.traceEnd(e,r,a),a},writable:!0,enumerable:!0,configurable:!0},execExprRelational:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r),i=this.execExpr(e.childs()[1],r),a=void 0;switch(e.get("op")){case"==":a=t===i;break;case"!=":a=t!==i;break;case"<=":a=util.coerce(t,"number")<=util.coerce(i,"number");break;case">=":a=util.coerce(t,"number")>=util.coerce(i,"number");break;case"<":a=util.coerce(t,"number")<util.coerce(i,"number");break;case">":a=util.coerce(t,"number")>util.coerce(i,"number");break;case"=~":a=null!==util.coerce(t,"string").match(util.coerce(i,"regexp"));break;case"!~":a=null===util.coerce(t,"string").match(util.coerce(i,"regexp"))}return this.traceEnd(e,r,a),a},writable:!0,enumerable:!0,configurable:!0},execExprArithmetical:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r),i=this.execExpr(e.childs()[1],r),a=void 0;switch(e.get("op")){case"+":a="string"==typeof t?t+util.coerce(i,"string"):util.coerce(t,"number")+util.coerce(i,"number");break;case"-":a=util.coerce(t,"number")+util.coerce(i,"number");break;case"*":a=util.coerce(t,"number")*util.coerce(i,"number");break;case"/":a=util.coerce(t,"number")/util.coerce(i,"number");break;case"%":a=util.coerce(t,"number")%util.coerce(i,"number");break;case"**":a=Math.pow(util.coerce(t,"number"),util.coerce(i,"number"))}return this.traceEnd(e,r,a),a},writable:!0,enumerable:!0,configurable:!0},execExprUnary:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r),i=void 0;switch(e.get("op")){case"!":i=!util.coerce(t,"boolean");break;case"~":i=~util.coerce(t,"number")}return this.traceEnd(e,r,i),i},writable:!0,enumerable:!0,configurable:!0},execExprFuncCall:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=e.get("id"),a=[this.adapter,r];e.childs().forEach(function(e){a.push(t.execExpr(e,r))});var c=this.funcs.run(i,a);return this.traceEnd(e,r,c),c},writable:!0,enumerable:!0,configurable:!0},execExprAttribute:{value:function(e,r){this.traceBegin(e,r);var t=e.get("id"),i=this.adapter.getNodeAttrValue(r,t);return this.traceEnd(e,r,i),i},writable:!0,enumerable:!0,configurable:!0},execExprParam:{value:function(e,r){this.traceBegin(e,r);var t=e.get("id");if("undefined"==typeof this.params[t])throw new Error('invalid parameter "'+t+'"');var i=this.params[t];return this.traceEnd(e,r,i),i},writable:!0,enumerable:!0,configurable:!0},execExprLiteralString:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0},execExprLiteralRegExp:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0},execExprLiteralNumber:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0},execExprLiteralValue:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0},execExprPath:{value:function(e,r){this.traceBegin(e,r);var t=this.execPath(e,r);return this.traceEnd(e,r,t),t},writable:!0,enumerable:!0,configurable:!0}}),r}(ASTQQueryTrace);module.exports=ASTQQueryExec;
},{"./astq-query-trace.js":11,"./astq-util.js":13}],11:[function(require,module,exports){
"use strict";var _prototypeProperties=function(e,r,t){r&&Object.defineProperties(e,r),t&&Object.defineProperties(e.prototype,t)},util=require("./astq-util.js"),ASTQQueryTrace=function(){function e(){}return _prototypeProperties(e,null,{prefixOf:{value:function(e,r){for(var t=0,i=e;null!==(i=i.parent());)t++;var a=util.pad("",4*t);t=0;for(var i=r;null!==(i=this.adapter.getParentNode(i));)t++;var o=util.pad("",4*t);return{prefix1:a,prefix2:o}},writable:!0,enumerable:!0,configurable:!0},traceBegin:{value:function(e,r){if(this.trace){var t=this.prefixOf(e,r),i=t.prefix1,a=t.prefix2;console.log("ASTQ: execute: | "+util.pad(i+e.type()+" (",-60)+" | "+a+this.adapter.getNodeType(r))}},writable:!0,enumerable:!0,configurable:!0},traceEnd:{value:function(e,r,t){var i=this;if(this.trace){var a=this.prefixOf(e,r),o=a.prefix1,n=a.prefix2,p=void 0;void 0===t?p="undefined":"object"==typeof t&&t instanceof Array?(p="[",t.forEach(function(e){p+="node("+i.adapter.getNodeType(e)+"),"}),p=p.replace(/,$/,"")+"]"):p=typeof t+"("+t+")",p.length>60&&(p=p.substr(0,60)+"..."),console.log("ASTQ: execute: | "+util.pad(o+"): "+p,-60)+" | "+n+this.adapter.getNodeType(r))}},writable:!0,enumerable:!0,configurable:!0}}),e}();module.exports=ASTQQueryTrace;
},{"./astq-util.js":13}],12:[function(require,module,exports){
"use strict";var _prototypeProperties=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},ASTY=require("asty"),PEGUtil=require("pegjs-util"),ASTQQueryParse=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,t,r,n,i,l){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=i,this.column=l,this.name="SyntaxError"}function r(e){function r(){return b}function n(){return a(b).line}function i(){return a(b).column}function l(e){throw p(e,null,b)}function a(t){function r(t,r,n){var i,l;for(i=r;n>i;i++)l=e.charAt(i),"\n"===l?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===l||"\u2028"===l||"\u2029"===l?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return m!==t&&(m>t&&(m=0,A={line:1,column:1,seenCR:!1}),r(A,m,t),m=t),A}function u(e){x>g||(g>x&&(x=g,k=[]),k.push(e))}function p(r,n,i){function l(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function u(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,i,l,a=new Array(e.length);for(l=0;l<e.length;l++)a[l]=e[l].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+i+" found."}var p=a(i),o=i<e.length?e.charAt(i):null;return null!==n&&l(n),new t(null!==r?r:u(n,o),n,o,i,p.line,p.column)}function o(e){var t,r=new Array(e.length);for(t=0;t<e.length;t++)r[t]=e.charCodeAt(t)-32;return r}function s(t){function r(e){return"[object Array]"===Object.prototype.toString.apply(e)?[]:e}var n,i,l=h[t],a=0,p=[],o=l.length,c=[],$=[],y=36*g+t,f=T[y];if(f)return g=f.nextPos,f.result;for(;;){for(;o>a;)switch(l[a]){case 0:$.push(r(v[l[a+1]])),a+=2;break;case 1:$.push(g),a++;break;case 2:$.pop(),a++;break;case 3:g=$.pop(),a++;break;case 4:$.length-=l[a+1],a+=2;break;case 5:$.splice(-2,1),a++;break;case 6:$[$.length-2].push($.pop()),a++;break;case 7:$.push($.splice($.length-l[a+1],l[a+1])),a+=2;break;case 8:$.pop(),$.push(e.substring($[$.length-1],g)),a++;break;case 9:c.push(o),p.push(a+3+l[a+1]+l[a+2]),$[$.length-1]?(o=a+3+l[a+1],a+=3):(o=a+3+l[a+1]+l[a+2],a+=3+l[a+1]);break;case 10:c.push(o),p.push(a+3+l[a+1]+l[a+2]),$[$.length-1]===d?(o=a+3+l[a+1],a+=3):(o=a+3+l[a+1]+l[a+2],a+=3+l[a+1]);break;case 11:c.push(o),p.push(a+3+l[a+1]+l[a+2]),$[$.length-1]!==d?(o=a+3+l[a+1],a+=3):(o=a+3+l[a+1]+l[a+2],a+=3+l[a+1]);break;case 12:$[$.length-1]!==d?(c.push(o),p.push(a),o=a+2+l[a+1],a+=2):a+=2+l[a+1];break;case 13:c.push(o),p.push(a+3+l[a+1]+l[a+2]),e.length>g?(o=a+3+l[a+1],a+=3):(o=a+3+l[a+1]+l[a+2],a+=3+l[a+1]);break;case 14:c.push(o),p.push(a+4+l[a+2]+l[a+3]),e.substr(g,v[l[a+1]].length)===v[l[a+1]]?(o=a+4+l[a+2],a+=4):(o=a+4+l[a+2]+l[a+3],a+=4+l[a+2]);break;case 15:c.push(o),p.push(a+4+l[a+2]+l[a+3]),e.substr(g,v[l[a+1]].length).toLowerCase()===v[l[a+1]]?(o=a+4+l[a+2],a+=4):(o=a+4+l[a+2]+l[a+3],a+=4+l[a+2]);break;case 16:c.push(o),p.push(a+4+l[a+2]+l[a+3]),v[l[a+1]].test(e.charAt(g))?(o=a+4+l[a+2],a+=4):(o=a+4+l[a+2]+l[a+3],a+=4+l[a+2]);break;case 17:$.push(e.substr(g,l[a+1])),g+=l[a+1],a+=2;break;case 18:$.push(v[l[a+1]]),g+=v[l[a+1]].length,a+=2;break;case 19:$.push(d),0===S&&u(v[l[a+1]]),a+=2;break;case 20:b=$[$.length-1-l[a+1]],a+=2;break;case 21:b=g,a++;break;case 22:for(n=l.slice(a+4,a+4+l[a+3]),i=0;i<l[a+3];i++)n[i]=$[$.length-1-n[i]];$.splice($.length-l[a+2],l[a+2],v[l[a+1]].apply(null,n)),a+=4+l[a+3];break;case 23:$.push(s(l[a+1])),a+=2;break;case 24:S++,a++;break;case 25:S--,a++;break;default:throw new Error("Invalid opcode: "+l[a]+".")}if(!(c.length>0))break;o=c.pop(),a=p.pop()}return T[y]={nextPos:g,result:$[0]},$[0]}var c,$=arguments.length>1?arguments[1]:{},d={},y={query:0},f=0,v=[d,function(e){return e},[],",",{type:"literal",value:",",description:'","'},function(e,t){return w("Query").add(Q(e,t,3))},function(e,t){return w("Path").add(Q(e,t,1))},null,function(e,t,r){return w("Step").add(e,t,r)},{type:"other",description:"axis"},"//",{type:"literal",value:"//",description:'"//"'},"/",{type:"literal",value:"/",description:'"/"'},"~~>",{type:"literal",value:"~~>",description:'"~~>"'},"~>",{type:"literal",value:"~>",description:'"~>"'},"<~~",{type:"literal",value:"<~~",description:'"<~~"'},"<~",{type:"literal",value:"<~",description:'"<~"'},"~~^",{type:"literal",value:"~~^",description:'"~~^"'},"~^",{type:"literal",value:"~^",description:'"~^"'},function(e){return w("Axis").set({op:e})},function(e){return w("Match").merge(e)},"*",{type:"literal",value:"*",description:'"*"'},function(){return w("Match").set({id:"*"})},"[",{type:"literal",value:"[",description:'"["'},"]",{type:"literal",value:"]",description:'"]"'},function(e){return w("Filter").add(e)},"?:",{type:"literal",value:"?:",description:'"?:"'},function(e,t){return w("ConditionalBinary").add(e,t)},"?",{type:"literal",value:"?",description:'"?"'},":",{type:"literal",value:":",description:'":"'},function(e,t,r){return w("ConditionalTernary").add(e,t,r)},"||",{type:"literal",value:"||",description:'"||"'},function(e,t,r){return w("Logical").set({op:t}).add(e,r)},"&&",{type:"literal",value:"&&",description:'"&&"'},"|",{type:"literal",value:"|",description:'"|"'},function(e,t,r){return w("Bitwise").set({op:t}).add(e,r)},"^",{type:"literal",value:"^",description:'"^"'},"&",{type:"literal",value:"&",description:'"&"'},"==",{type:"literal",value:"==",description:'"=="'},"!=",{type:"literal",value:"!=",description:'"!="'},"<=",{type:"literal",value:"<=",description:'"<="'},">=",{type:"literal",value:">=",description:'">="'},"<",{type:"literal",value:"<",description:'"<"'},">",{type:"literal",value:">",description:'">"'},"=~",{type:"literal",value:"=~",description:'"=~"'},"!~",{type:"literal",value:"!~",description:'"!~"'},function(e,t,r){return w("Relational").set({op:t}).add(e,r)},"<<",{type:"literal",value:"<<",description:'"<<"'},">>",{type:"literal",value:">>",description:'">>"'},"+",{type:"literal",value:"+",description:'"+"'},"-",{type:"literal",value:"-",description:'"-"'},function(e,t,r){return w("Arithmetical").set({op:t}).add(e,r)},"**",{type:"literal",value:"**",description:'"**"'},"%",{type:"literal",value:"%",description:'"%"'},"!",{type:"literal",value:"!",description:'"!"'},"~",{type:"literal",value:"~",description:'"~"'},function(e,t){return w("Unary").set({op:e}).add(t)},"(",{type:"literal",value:"(",description:'"("'},")",{type:"literal",value:")",description:'")"'},function(e,t){return w("FuncCall").merge(e).add(t)},function(e,t){return Q(e,t,3)},{type:"other",description:"node attribute"},"@",{type:"literal",value:"@",description:'"@"'},function(e){return w("Attribute").merge(e)},{type:"other",description:"query parameter reference"},"{",{type:"literal",value:"{",description:'"{"'},"}",{type:"literal",value:"}",description:'"}"'},function(e){return w("Param").merge(e)},function(e){return e},{type:"other",description:"identifier"},void 0,/^[a-zA-Z_]/,{type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},/^[a-zA-Z0-9_\-]/,{type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},function(e){return w("Identifier").set({id:e})},{type:"other",description:"quoted string literal"},'"',{type:"literal",value:'"',description:'"\\""'},/^[^"]/,{type:"class",value:'[^"]',description:'[^"]'},function(e){return w("LiteralString").set({value:e.join("")})},"'",{type:"literal",value:"'",description:'"\'"'},"\\'",{type:"literal",value:"\\'",description:'"\\\\\'"'},/^[^']/,{type:"class",value:"[^']",description:"[^']"},function(e){return w("LiteralString").set({value:e.replace(/\\'/g,"'")})},{type:"other",description:"escaped string character"},"\\\\",{type:"literal",value:"\\\\",description:'"\\\\\\\\"'},function(){return"\\"},'\\"',{type:"literal",value:'\\"',description:'"\\\\\\""'},function(){return'"'},function(){return"'"},"\\b",{type:"literal",value:"\\b",description:'"\\\\b"'},function(){return"\b"},"\\v",{type:"literal",value:"\\v",description:'"\\\\v"'},function(){return""},"\\f",{type:"literal",value:"\\f",description:'"\\\\f"'},function(){return"\f"},"\\t",{type:"literal",value:"\\t",description:'"\\\\t"'},function(){return"	"},"\\r",{type:"literal",value:"\\r",description:'"\\\\r"'},function(){return"\r"},"\\n",{type:"literal",value:"\\n",description:'"\\\\n"'},function(){return"\n"},"\\e",{type:"literal",value:"\\e",description:'"\\\\e"'},function(){return""},"\\x",{type:"literal",value:"\\x",description:'"\\\\x"'},/^[0-9a-fA-F]/,{type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},function(e){return String.fromCharCode(parseInt(e,16))},"\\u",{type:"literal",value:"\\u",description:'"\\\\u"'},{type:"other",description:"regular expression literal"},"\\/",{type:"literal",value:"\\/",description:'"\\\\/"'},/^[^\/]/,{type:"class",value:"[^\\/]",description:"[^\\/]"},function(e){var t;try{t=new RegExp(e.replace(/\\\//g,"/"))}catch(r){l(r.message)}return w("LiteralRegExp").set({value:t})},{type:"other",description:"numeric literal"},/^[+\-]/,{type:"class",value:"[+\\-]",description:"[+\\-]"},"0b",{type:"literal",value:"0b",description:'"0b"'},/^[01]/,{type:"class",value:"[01]",description:"[01]"},function(e,t){return w("LiteralNumber").set({value:parseInt(e+t,2)})},"0o",{type:"literal",value:"0o",description:'"0o"'},/^[0-7]/,{type:"class",value:"[0-7]",description:"[0-7]"},function(e,t){return w("LiteralNumber").set({value:parseInt(e+t,8)})},"0x",{type:"literal",value:"0x",description:'"0x"'},function(e,t){return w("LiteralNumber").set({value:parseInt(e+t,16)})},/^[0-9]/,{type:"class",value:"[0-9]",description:"[0-9]"},".",{type:"literal",value:".",description:'"."'},/^[eE]/,{type:"class",value:"[eE]",description:"[eE]"},function(e){return w("LiteralNumber").set({value:parseFloat(e)})},function(e){return w("LiteralNumber").set({value:parseInt(e,10)})},{type:"other",description:"global value"},"true",{type:"literal",value:"true",description:'"true"'},function(){return w("LiteralValue").set({value:!0})},"false",{type:"literal",value:"false",description:'"false"'},function(){return w("LiteralValue").set({value:!1})},"null",{type:"literal",value:"null",description:'"null"'},function(){return w("LiteralValue").set({value:null})},"NaN",{type:"literal",value:"NaN",description:'"NaN"'},function(){return w("LiteralValue").set({value:0/0})},"undefined",{type:"literal",value:"undefined",description:'"undefined"'},function(){return w("LiteralValue").set({value:void 0})},{type:"other",description:"optional blank"},{type:"other",description:"multi-line comment"},"/*",{type:"literal",value:"/*",description:'"/*"'},"*/",{type:"literal",value:"*/",description:'"*/"'},{type:"any",description:"any character"},{type:"other",description:"any whitespaces"},/^[ \t\r\n]/,{type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},{type:"other",description:"end of file"}],h=[o('!7@+F$7!+<%7@+2%7C+(%4$6!$!"%$$#  $##  $"#  "#  '),o('!7"+¬ô$ "!7@+G$.#""2#3$+7%7@+-%7"+#%\'$%$$#  $##  $"#  "#  ,R&!7@+G$.#""2#3$+7%7@+-%7"+#%\'$%$$#  $##  $"#  "#  "+)%4"6%""! %$"#  "#  '),o('!7#+e$ "!7@+-$7$+#%\'"%$"#  "#  ,8&!7@+-$7$+#%\'"%$"#  "#  "+)%4"6&""! %$"#  "#  '),o('!7%*# " \'+X$7@+N%7&+D%7@+:%7\'*# " \'+*%4%6(%#$" %$%#  $$#  $##  $"#  "#  '),o('!7%+X$7@+N%7&+D%7@+:%7\'*# " \'+*%4%6(%#$" %$%#  $$#  $##  $"#  "#  '),o('8!!.*""2*3+*q ".,""2,3-*e "..""2.3/*Y ".0""2031*M ".2""2233*A ".4""2435*5 ".6""2637*) ".8""2839+! (%+\' 4!6:!! %9*" 3)'),o('!7:+\' 4!6;!! %*4 "!.<""2<3=+& 4!6>! %'),o('!.?""2?3@+V$7@+L%7(+B%7@+8%.A""2A3B+(%4%6C%!"%$%#  $$#  $##  $"#  "#  '),o('!7)+W$7@+M%.D""2D3E+=%7@+3%7)+)%4%6F%"$ %$%#  $$#  $##  $"#  "#  *¬ó "!7)+¬Ü$7@+|%.G""2G3H+l%7@+b%7)+X%7@+N%.I""2I3J+>%7@+4%7)+*%4)6K)#($ %$)#  $(#  $\'#  $&#  $%#  $$#  $##  $"#  "#  *# "7)'),o('!7*+^$7@+T%!.L""2L3M+! (%+>%7@+4%7)+*%4%6N%#$" %$%#  $$#  $##  $"#  "#  *# "7*'),o('!7++^$7@+T%!.O""2O3P+! (%+>%7@+4%7*+*%4%6N%#$" %$%#  $$#  $##  $"#  "#  *# "7+'),o('!7,+^$7@+T%!.Q""2Q3R+! (%+>%7@+4%7++*%4%6S%#$" %$%#  $$#  $##  $"#  "#  *# "7,'),o('!7-+^$7@+T%!.T""2T3U+! (%+>%7@+4%7,+*%4%6S%#$" %$%#  $$#  $##  $"#  "#  *# "7-'),o('!7.+^$7@+T%!.V""2V3W+! (%+>%7@+4%7-+*%4%6S%#$" %$%#  $$#  $##  $"#  "#  *# "7.'),o('!7/+¬≤$7@+¬®%!.X""2X3Y*q ".Z""2Z3[*e ".\\""2\\3]*Y ".^""2^3_*M ".`""2`3a*A ".b""2b3c*5 ".d""2d3e*) ".f""2f3g+! (%+>%7@+4%7.+*%4%6h%#$" %$%#  $$#  $##  $"#  "#  *# "7/'),o('!70+j$7@+`%!.i""2i3j*) ".k""2k3l+! (%+>%7@+4%7/+*%4%6S%#$" %$%#  $$#  $##  $"#  "#  *# "70'),o('!71+j$7@+`%!.m""2m3n*) ".o""2o3p+! (%+>%7@+4%70+*%4%6q%#$" %$%#  $$#  $##  $"#  "#  *# "71'),o('!72+¬Ç$7@+x%!.r""2r3s*A ".<""2<3=*5 ".,""2,3-*) ".t""2t3u+! (%+>%7@+4%71+*%4%6q%#$" %$%#  $$#  $##  $"#  "#  *# "72'),o('!!.v""2v3w*) ".x""2x3y+! (%+3$73+)%4"6z""! %$"#  "#  *# "73'),o('74*; "76*5 "77*/ "78*) "79*# "7"'),o('!7:+w$7@+m%.{""2{3|+]%7@+S%75*# " \'+C%7@+9%.}""2}3~+)%4\'6\'"&"%$\'#  $&#  $%#  $$#  $##  $"#  "#  '),o('!7(+¬ô$ "!7@+G$.#""2#3$+7%7@+-%7(+#%\'$%$$#  $##  $"#  "#  ,R&!7@+G$.#""2#3$+7%7@+-%7(+#%\'$%$$#  $##  $"#  "#  "+)%4"6¬Ä""! %$"#  "#  '),o('8!.¬Ç""2¬Ç3¬É+2$7:+(%4"6¬Ñ"! %$"#  "#  9*" 3¬Å'),o('8!.¬Ü""2¬Ü3¬á+V$7@+L%7:+B%7@+8%.¬à""2¬à3¬â+(%4%6¬ä%!"%$%#  $$#  $##  $"#  "#  9*" 3¬Ö'),o('7;*/ "7=*) "7>*# "7?'),o('!.{""2{3|+V$7@+L%7(+B%7@+8%.}""2}3~+(%4%6¬ã%!"%$%#  $$#  $##  $"#  "#  '),o('8!!!!87?9*$$"" ¬ç"#  +Q$0¬é""1!3¬è+A% "0¬ê""1!3¬ë,)&0¬ê""1!3¬ë"+#%\'#%$##  $"#  "#  +! (%+\' 4!6¬í!! %9*" 3¬å'),o('8!.¬î""2¬î3¬ï+b$ "7<*) "0¬ñ""1!3¬ó,/&7<*) "0¬ñ""1!3¬ó"+8%.¬î""2¬î3¬ï+(%4#6¬ò#!!%$##  $"#  "#  *¬Ö "!.¬ô""2¬ô3¬ö+t$! ".¬õ""2¬õ3¬ú*) "0¬ù""1!3¬û,5&.¬õ""2¬õ3¬ú*) "0¬ù""1!3¬û"+! (%+8%.¬ô""2¬ô3¬ö+(%4#6¬ü#!!%$##  $"#  "#  9*" 3¬ì'),o('8!.¬°""2¬°3¬¢+& 4!6¬£! %*∆¶ "!.¬§""2¬§3¬•+& 4!6¬¶! %*∆è "!.¬ô""2¬ô3¬ö+& 4!6¬ß! %*≈∏ "!.¬®""2¬®3¬©+& 4!6¬™! %*≈° "!.¬´""2¬´3¬¨+& 4!6¬≠! %*≈ä "!.¬Æ""2¬Æ3¬Ø+& 4!6¬∞! %*ƒ≥ "!.¬±""2¬±3¬≤+& 4!6¬≥! %*ƒú "!.¬¥""2¬¥3¬µ+& 4!6¬∂! %*ƒÖ "!.¬∑""2¬∑3¬∏+& 4!6¬π! %*√Æ "!.¬∫""2¬∫3¬ª+& 4!6¬º! %*√ó "!.¬Ω""2¬Ω3¬æ+Y$!!0¬ø""1!3√Ä+3$0¬ø""1!3√Ä+#%\'"%$"#  "#  +! (%+(%4"6√Å"! %$"#  "#  *¬ä "!.√Ç""2√Ç3√É+y$!!0¬ø""1!3√Ä+S$0¬ø""1!3√Ä+C%0¬ø""1!3√Ä+3%0¬ø""1!3√Ä+#%\'$%$$#  $##  $"#  "#  +! (%+(%4"6√Å"! %$"#  "#  9*" 3¬†'),o('8!.,""2,3-+t$! ".√Ö""2√Ö3√Ü*) "0√á""1!3√à,5&.√Ö""2√Ö3√Ü*) "0√á""1!3√à"+! (%+8%.,""2,3-+(%4#6√â#!!%$##  $"#  "#  9*" 3√Ñ'),o('8!!0√ã""1!3√å*# " \'+! (%+d$.√ç""2√ç3√é+T%! "0√è""1!3√ê+,$,)&0√è""1!3√ê"""  +! (%+)%4#6√ë#"" %$##  $"#  "#  *»ó "!!0√ã""1!3√å*# " \'+! (%+d$.√í""2√í3√ì+T%! "0√î""1!3√ï+,$,)&0√î""1!3√ï"""  +! (%+)%4#6√ñ#"" %$##  $"#  "#  *∆≥ "!!0√ã""1!3√å*# " \'+! (%+d$.√ó""2√ó3√ò+T%! "0¬ø""1!3√Ä+,$,)&0¬ø""1!3√Ä"""  +! (%+)%4#6√ô#"" %$##  $"#  "#  *≈è "!!!0√ã""1!3√å*# " \'+√í$ "0√ö""1!3√õ,)&0√ö""1!3√õ"+¬¥%.√ú""2√ú3√ù+¬§% "0√ö""1!3√õ+,$,)&0√ö""1!3√õ"""  +%!0√û""1!3√ü+^$0√ã""1!3√å*# " \'+H% "0√ö""1!3√õ+,$,)&0√ö""1!3√õ"""  +#%\'#%$##  $"#  "#  *# " \'+#%\'%%$%#  $$#  $##  $"#  "#  +! (%+\' 4!6√†!! %*q "!!!0√ã""1!3√å*# " \'+H$ "0√ö""1!3√õ+,$,)&0√ö""1!3√õ"""  +#%\'"%$"#  "#  +! (%+\' 4!6√°!! %9*" 3√ä'),o('8!.√£""2√£3√§+& 4!6√•! %*y "!.√¶""2√¶3√ß+& 4!6√®! %*b "!.√©""2√©3√™+& 4!6√´! %*K "!.√¨""2√¨3√≠+& 4!6√Æ! %*4 "!.√Ø""2√Ø3√∞+& 4!6√±! %9*" 3√¢'),o('8 "7A*# "7B,)&7A*# "7B"9*" 3√≤'),o('8!.√¥""2√¥3√µ+¬°$ "!!8.√∂""2√∂3√∑9*$$"" ¬ç"#  +2$-""1!3√∏+#%\'"%$"#  "#  ,Q&!!8.√∂""2√∂3√∑9*$$"" ¬ç"#  +2$-""1!3√∏+#%\'"%$"#  "#  "+3%.√∂""2√∂3√∑+#%\'#%$##  $"#  "#  9*" 3√≥'),o('8 "0√∫""1!3√ª+,$,)&0√∫""1!3√ª"""  9*" 3√π'),o('8!8-""1!3√∏9*$$"" ¬ç"#  9*" 3√º')],g=0,b=0,m=0,A={line:1,column:1,seenCR:!1},x=0,k=[],S=0,T={};if("startRule"in $){if(!($.startRule in y))throw new Error("Can't start parsing from rule \""+$.startRule+'".');f=y[$.startRule]}var Q=$.util.makeUnroll(n,i,r,t),w=$.util.makeAST(n,i,r,$);if(c=s(f),c!==d&&g===e.length)return c;throw c!==d&&g<e.length&&u({type:"end",description:"end of input"}),p(null,k,x)}return e(t,Error),{SyntaxError:t,parse:r}}(),ASTQQueryExec=require("./astq-query-exec.js"),ASTQQuery=function(){function e(e){this.ast=null,e&&this.compile(e)}return _prototypeProperties(e,null,{compile:{value:function(e,t){t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+e);var r=PEGUtil.parse(ASTQQueryParse,e,{startRule:"query",makeAST:function(e,t,r,n){return ASTY.apply(null,n).pos(e,t,r)}});if(null!==r.error)throw new Error("ASTQ: compile: query parsing failed:\n"+PEGUtil.errorMessage(r.error,!0).replace(/^/gm,"ERROR: "));return this.ast=r.ast,t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this},writable:!0,enumerable:!0,configurable:!0},dump:{value:function(){return this.ast.dump()},writable:!0,enumerable:!0,configurable:!0},execute:{value:function(e,t,r,n,i){i&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var l=new ASTQQueryExec(t,r,n,i);return l.execQuery(this.ast,e)},writable:!0,enumerable:!0,configurable:!0}}),e}();module.exports=ASTQQuery;
},{"./astq-query-exec.js":10,"asty":1,"pegjs-util":2}],13:[function(require,module,exports){
"use strict";var ASTQUtil={pad:function(e,r){return 0>r?e.length>-r?e.substr(0,-r):e+Array(-r+1-e.length).join(" "):e.length>r?e.substr(0,r):Array(r+1-e.length).join(" ")+e},truthy:function(e){var r=void 0;switch(typeof e){case"boolean":r=e;break;case"number":r=0!==e&&!isNaN(e);break;case"string":r=""!==e;break;case"object":r=!1,null!==e&&(r=!0,e instanceof Array&&(r=e.length>0));break;default:r=!1}return r},coerce:function(e,r){var t=void 0;try{switch(r){case"boolean":t=Boolean(e);break;case"number":t=Number(e);break;case"string":t=String(e);break;case"regexp":t=new RegExp(e);break;default:t=e}}catch(a){throw new Error("cannot coerce value into type "+r)}return t}};module.exports=ASTQUtil;
},{}],14:[function(require,module,exports){
"use strict";var _prototypeProperties=function(e,r,t){r&&Object.defineProperties(e,r),t&&Object.defineProperties(e.prototype,t)},ASTQAdapter=require("./astq-adapter.js"),ASTQFuncs=require("./astq-funcs.js"),ASTQCache=require("./astq-cache.js"),ASTQQuery=require("./astq-query.js"),ASTQ=function(){function e(){return this instanceof e?(this._adapter=new ASTQAdapter,this._funcs=new ASTQFuncs,void(this._cache=new ASTQCache)):new e}return _prototypeProperties(e,null,{adapter:{value:function r(r){if(1!==arguments.length)throw new Error("ASTQ#adapter: invalid number of arguments");return this._adapter.register(r),this},writable:!0,enumerable:!0,configurable:!0},func:{value:function t(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this},writable:!0,enumerable:!0,configurable:!0},cache:{value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this},writable:!0,enumerable:!0,configurable:!0},compile:{value:function(e,r){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===r&&(r=!1);var t=this._cache.get(e);return void 0===t&&(t=new ASTQQuery,t.compile(e,r),this._cache.set(e,t)),t},writable:!0,enumerable:!0,configurable:!0},execute:{value:function(e,r,t,n){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===t&&(t={}),void 0===n&&(n=!1);var u=this._adapter.select(e);if(void 0===u)throw new Error("ASTQ#execute: no suitable adapter found for node");return r.execute(e,u,t,this._funcs,n)},writable:!0,enumerable:!0,configurable:!0},query:{value:function(e,r,t,n){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===t&&(t={}),void 0===n&&(n=!1),this.execute(e,this.compile(r,n),t,n)},writable:!0,enumerable:!0,configurable:!0}}),e}();module.exports=ASTQ;
},{"./astq-adapter.js":6,"./astq-cache.js":7,"./astq-funcs.js":9,"./astq-query.js":12}]},{},[3,4,5,6,7,8,9,10,11,12,13,14])(14)
});


//# sourceMappingURL=astq.map